(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{107:function(e,t,r){},108:function(e,t,r){},109:function(e,t,r){},110:function(e,t,r){},111:function(e,t,r){},112:function(e,t,r){},113:function(e,t,r){},114:function(e,t,r){},115:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r.n(a),s=r(26),c=r.n(s),o=(r(75),r(50)),i=r.n(o),l=r(13),u=r(8),p=r(68),j=r(4),d=function(e,t){switch(t.type){case"LOGIN_START":return{user:null,isRetrieving:!0,error:!1};case"LOGIN_SUCCESS":return{user:t.payload,isRetrieving:!1,error:!1};case"LOGIN_FAILURE":return{user:null,isRetrieving:!1,error:t.payload};case"FOLLOW":return Object(j.a)(Object(j.a)({},e),{},{user:Object(j.a)(Object(j.a)({},e.user),{},{following:[].concat(Object(p.a)(e.user.following),[t.payload])})});case"UNFOLLOW":return Object(j.a)(Object(j.a)({},e),{},{user:Object(j.a)(Object(j.a)({},e.user),{},{following:e.user.following.filter((function(e){return e!==t.payload}))})});default:return e}},b=r(0),f={user:JSON.parse(localStorage.getItem("user"))||null,isRetrieving:!1,error:!1},O=Object(a.createContext)(f),m=function(e){var t=e.children,r=Object(a.useReducer)(d,f),n=Object(u.a)(r,2),s=n[0],c=n[1];return Object(a.useEffect)((function(){localStorage.setItem("user",JSON.stringify(s.user))})),Object(b.jsx)(O.Provider,{value:{user:s.user,isRetrieving:s.isRetrieving,error:s.error,dispatch:c},children:t})},h=function(e){return{type:"LOGIN_SUCCESS",payload:e}},x=function(e){return{type:"LOGIN_FAILURE",payload:e}},v=function(e){var t=e.isHomepage,r=e.username,n=Object(a.useContext)(O),s=n.user,c=n.dispatch,o=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PUBLIC_FOLDER;return Object(b.jsxs)("div",{className:"headerContainer",children:[Object(b.jsx)("div",{className:"headerLeft"}),Object(b.jsx)("button",{className:"logoutButton",onClick:function(){c(h(null)),localStorage.clear(),window.location.replace("https://in-touch-heroku.herokuapp.com/")},children:Object(b.jsx)(l.b,{to:"/",children:Object(b.jsx)(i.a,{className:"logoutButtonLogo"})})}),Object(b.jsx)("div",{className:"headerCenter",children:Object(b.jsx)(l.b,{to:"/",children:Object(b.jsx)("span",{className:"logo",children:"InTouch"})})}),Object(b.jsx)("div",{className:"headerRight",children:t||s.username!==r?Object(b.jsx)(l.b,{to:"/profile/".concat(s.username),children:Object(b.jsx)("img",{src:s.profilePicture?o+s.profilePicture:o+"/user/defaultAvatar.jpg",alt:"",className:"headerProPic"})}):Object(b.jsx)("a",{href:"#top",children:Object(b.jsx)("img",{src:s.profilePicture?o+s.profilePicture:o+"/user/defaultAvatar.jpg",alt:"",className:"headerProPic"})})})]})},g=r(3),N=r.n(g),w=r(6),k=(r(87),r(54)),C=r.n(k),_=r(30),P=r.n(_),y=(r(88),function(e){var t=e.user,r=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PUBLIC_FOLDER;return Object(b.jsx)(l.b,{to:"/profile/".concat(t.username),children:Object(b.jsxs)("li",{className:"followingbarFollowee",children:[Object(b.jsx)("img",{className:"followingbarFolloweeImg",src:t.profilePicture?r+t.profilePicture:r+"/user/defaultAvatar.jpg",alt:""}),Object(b.jsx)("span",{className:"followingbarFolloweeName",children:t.username})]})})}),E=r(5),S=r.n(E),D={info:function(){var e;return(e=console).log.apply(e,arguments)},error:function(){var e;return(e=console).log.apply(e,arguments)}},T=function(e){var t=e.user,r=Object(a.useState)([]),n=Object(u.a)(r,2),s=n[0],c=n[1];Object(a.useEffect)((function(){(function(){var e=Object(w.a)(N.a.mark((function e(){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t||!t._id){e.next=6;break}return e.next=4,S.a.get("/users/following/".concat(t._id));case 4:r=e.sent,c(r.data.filter((function(e){return null!==e&&void 0!==e})));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),D.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[t]);return Object(b.jsx)("div",{id:"followingbar",children:Object(b.jsxs)("div",{className:"followingbarWrapper",children:[Object(b.jsxs)("div",{className:"followingbarTitleWrapper",children:[Object(b.jsxs)("div",{className:"followingbarTitle",onClick:function(){return document.getElementById("followingbar").scrollTo(0,0)},children:[Object(b.jsx)(C.a,{className:"followeeLogo",htmlColor:"rgb(100, 100, 100)"}),Object(b.jsx)("p",{children:"Following"})]}),Object(b.jsx)("hr",{className:"followingbarHr"})]}),0===s.length?Object(b.jsxs)("div",{className:"noUsersFollowing",children:[Object(b.jsx)(P.a,{className:"noUsersFollowingIcon",fontSize:"large"}),"Following No Users"]}):Object(b.jsx)("ul",{className:"followingbarFollowees",children:s.map((function(e){return Object(b.jsx)(y,{user:e},e._id)}))})]})})},L=(r(107),r(108),r(56)),I=r.n(L),R=r(57),F=r.n(R),A=r(58),U=r.n(A),B=r(59),W=r.n(B),H=r(55),K=r.n(H),V=function(e){var t=e.isHomepage,r=Object(a.useContext)(O),n=r.user,s=r.dispatch,c="/assets",o=Object(a.useRef)(),i=Object(a.useState)(null),p=Object(u.a)(i,2),d=p[0],f=p[1],m=Object(a.useState)("media"),x=Object(u.a)(m,2),v=x[0],g=x[1],k=function(){var e=Object(w.a)(N.a.mark((function e(){var t,r,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={userId:n._id,caption:o.current.value},!d){e.next=15;break}return r=new FormData,a="/post/"+Date.now()+d.name,r.append("name",a),r.append("file",d),t.content=a,e.prev=7,e.next=10,S.a.post("/upload",r);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),D.error(e.t0);case 15:if(e.prev=15,!d&&!o.current.value){e.next=22;break}return e.next=19,S.a.post("/posts",t);case 19:window.location.reload(),e.next=23;break;case 22:alert("Cannot make an empty post");case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(15),D.error(e.t1);case 28:case"end":return e.stop()}}),e,null,[[7,12],[15,25]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(w.a)(N.a.mark((function e(){var t,r,a,c,o;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!d){e.next=20;break}return t=new FormData,r="/post/"+Date.now()+d.name,t.append("name",r),t.append("file",d),e.next=8,S.a.post("/upload",t);case 8:return e.next=10,S.a.get("/users/",{params:{userId:n._id}});case 10:return a=e.sent,c={},o={},"coverPhoto"===v?(c=Object(j.a)(Object(j.a)({},a),{},{coverPicture:r}),o=Object(j.a)(Object(j.a)({},n),{},{coverPicture:r})):(c=Object(j.a)(Object(j.a)({},a),{},{profilePicture:r}),o=Object(j.a)(Object(j.a)({},n),{},{profilePicture:r})),e.next=16,S.a.put("/users/".concat(n._id),c);case 16:s(h(o)),window.location.reload(),e.next=21;break;case 20:alert("Cannot update without a picture");case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),D.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(w.a)(N.a.mark((function e(){var t,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!o.current.value){e.next=9;break}return e.next=4,S.a.get("/users/",{params:{userId:n._id}});case 4:return t=e.sent,r=Object(j.a)(Object(j.a)({},t),{},{bio:o.current.value}),e.next=8,S.a.put("/users/".concat(n._id),r);case 8:window.location.reload();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),D.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),P=function(e){return f(e.target.files[0])};return Object(b.jsx)("div",{className:"makepost",children:Object(b.jsxs)("div",{className:"makepostWrapper",children:[Object(b.jsxs)("div",{className:"makepostTop",children:[t?Object(b.jsx)(l.b,{to:"/profile/".concat(n.username),children:Object(b.jsx)("img",{className:"makepostProPic",src:n.profilePicture?c+n.profilePicture:c+"/user/defaultAvatar.jpg",alt:""})}):Object(b.jsx)("a",{href:"#top",children:Object(b.jsx)("img",{className:"makepostProPic",src:n.profilePicture?c+n.profilePicture:c+"/user/defaultAvatar.jpg",alt:""})}),Object(b.jsx)("input",{className:"makepostInput",placeholder:"What would you like to tell the world, "+n.username+"?",ref:o,maxLength:"500"})]}),Object(b.jsx)("hr",{className:"makepostHr"}),d&&Object(b.jsxs)("div",{className:"makepostContentWrapper",children:[Object(b.jsx)("img",{className:"makepostContent",src:URL.createObjectURL(d),alt:""}),Object(b.jsx)(K.a,{className:"makepostContentCancel",onClick:function(){return f(null)}})]}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),"media"===v?k():"profilePic"===v||"coverPhoto"===v?C():"bio"===v?_():D.error("Invalid button press received")},children:[Object(b.jsx)("div",{className:"makepostBottom",children:Object(b.jsxs)("div",{className:"makepostOptions",children:[Object(b.jsxs)("label",{className:"makepostOption",htmlFor:"media",onClick:function(){return g("media")},children:[Object(b.jsx)(I.a,{className:"makepostIcon",htmlColor:"rgb(206, 33, 55)"}),Object(b.jsx)("span",{className:"makepostOptionText",children:"Media"}),Object(b.jsx)("input",{type:"file",style:{display:"none"},id:"media",accept:".png, .jpg, .jpeg",onChange:P})]}),Object(b.jsxs)("label",{className:"makepostOption",htmlFor:"proPic",onClick:function(){g("profilePic"),alert("Select the photo you wish to be your new profile picture, then click post, like you are making a normal post.")},children:[Object(b.jsx)(F.a,{className:"makepostIcon",htmlColor:"rgb(0, 102, 204"}),Object(b.jsx)("span",{className:"makepostOptionText",children:"Profile Picture"}),Object(b.jsx)("input",{type:"file",style:{display:"none"},id:"proPic",accept:".png, .jpg, .jpeg",onChange:P})]}),Object(b.jsxs)("label",{className:"makepostOption",htmlFor:"cover",onClick:function(){g("coverPhoto"),alert("Select the photo you wish to be your new cover photo, then click post, like you are making a normal post.")},children:[Object(b.jsx)(U.a,{className:"makepostIcon",htmlColor:"rgb(0, 180, 0)"}),Object(b.jsx)("span",{className:"makepostOptionText",children:"Cover Photo"}),Object(b.jsx)("input",{type:"file",style:{display:"none"},id:"cover",accept:".png, .jpg, .jpeg",onChange:P})]}),Object(b.jsxs)("label",{className:"makepostOption",onClick:function(){g("bio"),alert("Write your new bio in the text input area, as if you were writing a caption, then press post.")},children:[Object(b.jsx)(W.a,{className:"makepostIcon",htmlColor:"rgb(245, 176, 66)"}),Object(b.jsx)("span",{className:"makepostOptionText",children:"Bio"})]})]})}),Object(b.jsx)("div",{className:"makepostPostButtonSection",children:Object(b.jsx)("button",{className:"makepostPostButton",type:"submit",children:"Post"})})]})]})})},q=(r(109),r(32)),G=r.n(q),z=r(31),J=r.n(z),Y=r(61),M=r.n(Y),$=r(134),Q=r(60);$.a.locale(Q);var X=new $.a("en-US"),Z=function(e){var t=e.post,r=e.isHomepage,n=Object(a.useState)(t.likes.length),s=Object(u.a)(n,2),c=s[0],o=s[1],i=Object(a.useState)({}),p=Object(u.a)(i,2),d=p[0],f=p[1],m=Object(a.useState)(!1),h=Object(u.a)(m,2),x=h[0],v=h[1],g=Object(a.useState)(!1),k=Object(u.a)(g,2),C=k[0],_=k[1],P=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PUBLIC_FOLDER,y=Object(a.useContext)(O).user,E=r?"postDropdownHome":"postDropdownProfile",T=r?"postDropdownWidgetHome":"postDropdownWidgetProfile";Object(a.useEffect)((function(){(function(){var e=Object(w.a)(N.a.mark((function e(){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("/users?userId=".concat(t.userId));case 2:r=e.sent,f(r.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t.userId]),Object(a.useEffect)((function(){v(t.likes.includes(y._id))}),[y,t.likes]);var L=function(){var e=Object(w.a)(N.a.mark((function e(){var r,a,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=prompt("Enter the new caption for the post."),"y"!==(null===(r=prompt("Enter Y to confirm or anything else to cancel. Casing does not matter."))||void 0===r?void 0:r.toLowerCase())){e.next=13;break}return e.prev=3,n=Object(j.a)(Object(j.a)({},t),{},{caption:a}),e.next=7,S.a.put("/posts/".concat(t._id),n);case 7:window.location.reload(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),D.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(w.a)(N.a.mark((function e(){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("y"!==(null===(r=prompt("Enter Y to confirm or anything else to cancel. Casing does not matter."))||void 0===r?void 0:r.toLowerCase())){e.next=11;break}return e.prev=2,e.next=5,S.a.delete("/posts/".concat(t._id),{data:t});case 5:window.location.reload(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),D.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}();return Object(b.jsx)("div",{className:"post",children:Object(b.jsxs)("div",{className:"postWrapper",children:[Object(b.jsxs)("div",{className:"postTop",children:[r?Object(b.jsx)(l.b,{to:"/profile/".concat(d.username),children:Object(b.jsx)("img",{className:"postProPic",src:d.profilePicture?P+d.profilePicture:P+"/user/defaultAvatar.jpg",alt:""})}):Object(b.jsx)("a",{href:"#top",children:Object(b.jsx)("img",{className:"postProPic",src:d.profilePicture?P+d.profilePicture:P+"/user/defaultAvatar.jpg",alt:""})}),Object(b.jsxs)("div",{className:"postTopText",children:[r?Object(b.jsx)(l.b,{to:"/profile/".concat(d.username),color:"black",children:Object(b.jsx)("span",{className:"postUsername",children:d.username})}):Object(b.jsx)("a",{href:"#top",children:Object(b.jsx)("span",{className:"postUsername",children:d.username})}),Object(b.jsx)("span",{className:"postDate",children:X.format(Date.now()-(Date.now()-new Date(t.createdAt).getTime()),"mini-now")})]}),C&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:E,children:[Object(b.jsxs)("div",{className:"postDropdownEntry",onClick:L,children:[Object(b.jsx)(M.a,{className:"postDropdownEdit"}),Object(b.jsx)("span",{className:"postDropdownEdit",children:"Edit Caption"})]}),Object(b.jsxs)("div",{className:"postDropdownEntry",onClick:I,children:[Object(b.jsx)(J.a,{className:"postDropdownDelete"}),Object(b.jsx)("span",{className:"postDropdownDelete",children:"Delete Post"})]})]}),Object(b.jsx)("div",{className:T})]}),(null===t||void 0===t?void 0:t.userId)===(null===y||void 0===y?void 0:y._id)&&Object(b.jsx)(G.a,{className:"postOptions",style:{marginLeft:r?"80%":"75%"},onClick:function(){return _(!C)}})]}),Object(b.jsx)("span",{className:"postCaption",children:null===t||void 0===t?void 0:t.caption}),Object(b.jsx)("div",{className:"postCenter",children:Object(b.jsx)("img",{className:"postContent",src:P+(null===t||void 0===t?void 0:t.content),alt:""})}),Object(b.jsxs)("div",{className:"postBottom",children:[Object(b.jsx)("img",{className:"likeButton",src:"".concat(P,"/likeButton.png"),onClick:function(){try{S.a.put("/posts/"+t._id+"/like",{userId:y._id})}catch(e){}o(x?c-1:c+1),v(!x)},alt:""}),Object(b.jsx)("span",{className:"postNumLikes",children:c})]})]})})},ee=r(62),te=r.n(ee),re=function(e){var t=e.username,r=e.isHomepage,n=Object(a.useState)([]),s=Object(u.a)(n,2),c=s[0],o=s[1],i=Object(a.useContext)(O).user,l=r||c.length>0||t===i.username?"homeFeedWrapper":"profileFeedWrapper";return Object(a.useEffect)((function(){(function(){var e=Object(w.a)(N.a.mark((function e(){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,S.a.get("/posts/profile/"+t);case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,S.a.get("posts/feed/"+i._id);case 8:e.t0=e.sent;case 9:r=e.t0,o(r.data.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,i]),Object(b.jsx)("div",{className:"feed",children:Object(b.jsxs)("div",{className:l,children:[(t===i.username||t===i.userName)&&Object(b.jsx)(V,{isHomepage:r}),0===c.length?Object(b.jsxs)("div",{className:"noPosts",children:[Object(b.jsx)(te.a,{className:"noPostIcon",fontSize:"large"}),"No Posts Yet"]}):c.map((function(e){return Object(b.jsx)(Z,{post:e,isHomepage:r},e._id)}))]})})},ae=(r(110),function(){var e=Object(a.useContext)(O).user;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(v,{isHomepage:!0}),Object(b.jsxs)("div",{className:"homeContainer",children:[Object(b.jsx)(T,{user:e}),Object(b.jsx)(re,{isHomepage:!0})]})]})}),ne=(r(111),r(112),r(39)),se=r.n(ne),ce=r(38),oe=r.n(ce),ie=r(40),le=r.n(ie),ue=r(64),pe=r.n(ue),je=r(63),de=r.n(je),be=function(e){var t=e.user,r=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PUBLIC_FOLDER,n=Object(a.useState)([]),s=Object(u.a)(n,2),c=s[0],o=s[1],i=Object(a.useContext)(O),p=i.user,d=i.dispatch,f=Object(a.useState)(p.following.includes(t._id)),m=Object(u.a)(f,2),h=m[0],x=m[1];Object(a.useEffect)((function(){x(p.following.includes(t._id))}),[p,t]),Object(a.useEffect)((function(){(function(){var e=Object(w.a)(N.a.mark((function e(){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t||!t._id){e.next=6;break}return e.next=4,S.a.get("/users/followers/".concat(t._id));case 4:r=e.sent,o(r.data.filter((function(e){return null!==e&&void 0!==e})));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),D.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[t]);var v=function(){var e=Object(w.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!h){e.next=7;break}return e.next=4,S.a.put("/users/".concat(t._id,"/unfollow"),{userId:p._id});case 4:d({type:"UNFOLLOW",payload:t._id}),e.next=10;break;case 7:return e.next=9,S.a.put("/users/".concat(t._id,"/follow"),{userId:p._id});case 9:d({type:"FOLLOW",payload:t._id});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),D.error(e.t0);case 15:x(!h),window.location.reload();case 17:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(w.a)(N.a.mark((function e(r){var a,n,s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=prompt("Enter your "+r+". There is a 40 character limit to keep information to the point.")).length>40&&(r=r.charAt(0).toUpperCase()+r.slice(1),a=r+" unspecified",alert(r+" input exceeded 40 character limit. "+r+" set to unspecified."),r=r.charAt(0).toLowerCase()+r.slice(1)),e.next=5,S.a.get("/users/",{params:{userId:t._id}});case 5:return n=e.sent,s={},"location"===r?s=Object(j.a)(Object(j.a)({},n),{},{location:a}):"job"===r?s=Object(j.a)(Object(j.a)({},n),{},{job:a}):"education"===r?s=Object(j.a)(Object(j.a)({},n),{},{education:a}):D.error("Invalid user information field selected"),e.next=10,S.a.put("/users/".concat(t._id),s);case 10:window.location.reload(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),D.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)("div",{className:"profileinfo",children:Object(b.jsxs)("div",{className:"profileinfoItem",children:[t.username!==p.username&&(h?Object(b.jsx)("button",{className:"profileinfoUnfollowButton",onClick:v,children:Object(b.jsxs)("div",{className:"profileinfoUnfollowButtonContent",children:[Object(b.jsx)(de.a,{})," Unfollow"]})}):Object(b.jsx)("button",{className:"profileinfoFollowButton",onClick:v,children:Object(b.jsxs)("div",{className:"profileinfoFollowButtonContent",children:[Object(b.jsx)(pe.a,{})," Follow"]})})),Object(b.jsxs)("div",{className:"profileinfoMain",children:[Object(b.jsx)("h4",{className:"profileinfoTitle",children:"Information"}),Object(b.jsxs)("div",{className:"profileinfoPair",children:[p._id===t._id?Object(b.jsx)(oe.a,{className:"profileinfoKeySelf",htmlColor:"rgb(60, 60, 60)",onClick:function(){return g("location")}}):Object(b.jsx)(oe.a,{className:"profileinfoKey",htmlColor:"rgb(60, 60, 60)"}),Object(b.jsx)("span",{className:"profileinfoValue",children:t.location?t.location:"Location unspecified"})]}),Object(b.jsxs)("div",{className:"profileinfoPair",children:[p._id===t._id?Object(b.jsx)(se.a,{className:"profileinfoKeySelf",htmlColor:"rgb(60, 60, 60)",onClick:function(){return g("job")}}):Object(b.jsx)(se.a,{className:"profileinfoKey",htmlColor:"rgb(60, 60, 60)"}),Object(b.jsx)("span",{className:"profileinfoValue",children:t.job?t.job:"Job unspecified"})]}),Object(b.jsxs)("div",{className:"profileinfoPair",children:[p._id===t._id?Object(b.jsx)(le.a,{className:"profileinfoKeySelf",htmlColor:"rgb(60, 60, 60)",onClick:function(){return g("education")}}):Object(b.jsx)(le.a,{className:"profileinfoKey",htmlColor:"rgb(60, 60, 60)"}),Object(b.jsx)("span",{className:"profileinfoValue",children:t.education?t.education:"Education unspecified"})]})]}),Object(b.jsxs)("div",{className:"profileinfoFollowing",children:[Object(b.jsx)("h4",{className:"profileinfoTitle",children:"Followers"}),0===c.length?Object(b.jsxs)("div",{className:"noUsersFollowed",children:[Object(b.jsx)(P.a,{className:"noUsersFollowedIcon",fontSize:"large"}),"No Followers"]}):Object(b.jsx)("div",{className:"profileinfoFollowingList",children:c.map((function(e){return Object(b.jsx)(l.b,{to:"/profile/".concat(e.username),style:{textDecoration:"none"},children:Object(b.jsxs)("div",{className:"profileinfoFollowee",children:[Object(b.jsx)("img",{className:"profileinfoFolloweeProPic",src:e.profilePicture?r+e.profilePicture:r+"/user/defaultAvatar.jpg",alt:""}),Object(b.jsx)("span",{className:"profileinfoFolloweeUsername",children:e.username})]})},e._id)}))})]})]})})},fe=r(65),Oe=r.n(fe),me=r(66),he=r.n(me),xe=r(67),ve=r.n(xe),ge=r(7),Ne=function(){var e=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PUBLIC_FOLDER,t=Object(a.useState)({}),r=Object(u.a)(t,2),n=r[0],s=r[1],c=Object(a.useState)(!1),o=Object(u.a)(c,2),i=o[0],l=o[1],p=Object(ge.h)().username,d=Object(a.useContext)(O),f=d.user,m=d.dispatch,x=Object(ge.g)();Object(a.useEffect)((function(){(function(){var e=Object(w.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get("/users?username=".concat(p));case 3:t=e.sent,s(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),D.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[p]),Object(a.useEffect)((function(){i&&l(!1)}),[n]);var g=function(){var e=Object(w.a)(N.a.mark((function e(t){var r,a,s,c,o;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=prompt("Enter your new "+t+"."),"y"!==(null===(r=prompt("Enter Y to confirm or N to cancel. Casing does not matter."))||void 0===r?void 0:r.toLowerCase())){e.next=34;break}return e.prev=3,e.next=6,S.a.get("/users?username=".concat(p));case 6:if(s=e.sent,"email"!==t||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)){e.next=12;break}return e.next=10,S.a.put("/users/email/".concat(n._id),{data:Object(j.a)(Object(j.a)({},s),{},{email:a})});case 10:e.next=28;break;case 12:if("username"!==t){e.next=21;break}return e.next=15,S.a.put("/users/username/".concat(n._id),{data:Object(j.a)(Object(j.a)({},s),{},{username:a})});case 15:c=e.sent,o=c.data.name,m(h(Object(j.a)(Object(j.a)({},f),{},{username:o}))),x.push("/profile/".concat(o)),e.next=28;break;case 21:if(!("password"===t&&a.length>=5)){e.next=26;break}return e.next=24,S.a.put("/users/password/".concat(n._id),{data:Object(j.a)(Object(j.a)({},s),{},{password:a})});case 24:e.next=28;break;case 26:return alert("Invalid ".concat(t,". Passwords must be at least 5 characters and emails must be in valid format.")),e.abrupt("return");case 28:alert("".concat(t," successfully changed.")),e.next=34;break;case 31:e.prev=31,e.t0=e.catch(3),D.error(e.t0);case 34:case"end":return e.stop()}}),e,null,[[3,31]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(w.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("y"!==(null===(t=prompt("Enter Y to confirm or N to cancel. Casing does not matter."))||void 0===t?void 0:t.toLowerCase())){e.next=11;break}return e.prev=2,e.next=5,S.a.delete("/users/".concat(f._id),{data:f});case 5:x.push("/register"),m(h(null)),localStorage.clear(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),D.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(v,{isHomepage:!1,username:p}),Object(b.jsxs)("div",{className:"profile",children:[Object(b.jsx)(T,{user:n}),Object(b.jsxs)("div",{className:"profileRight",children:[Object(b.jsxs)("div",{className:"profileCover",children:[Object(b.jsx)("img",{className:"profileCoverPic",src:n.coverPicture?e+n.coverPicture:e+"/user/defaultCover.png",alt:""}),Object(b.jsx)("img",{className:"profileProPic",src:n.profilePicture?e+n.profilePicture:e+"/user/defaultAvatar.jpg",alt:""})]}),i&&Object(b.jsxs)("div",{className:"profileDropdown triangle",children:[Object(b.jsxs)("div",{className:"profileDropdownEntry",onClick:function(){return g("email")},children:[Object(b.jsx)(Oe.a,{className:"profileDropdownEdit"}),Object(b.jsx)("span",{className:"profileDropdownEdit",children:"Change Email"})]}),Object(b.jsxs)("div",{className:"profileDropdownEntry",onClick:function(){return g("username")},children:[Object(b.jsx)(he.a,{className:"profileDropdownEdit"}),Object(b.jsx)("span",{className:"profileDropdownEdit",children:"Change Username"})]}),Object(b.jsxs)("div",{className:"profileDropdownEntry",onClick:function(){return g("password")},children:[Object(b.jsx)(ve.a,{className:"profileDropdownEdit"}),Object(b.jsx)("span",{className:"profileDropdownEdit",children:"Change Password"})]}),Object(b.jsxs)("div",{className:"profileDropdownEntry",onClick:k,children:[Object(b.jsx)(J.a,{className:"profileDropdownDelete"}),Object(b.jsx)("span",{className:"profileDropdownDelete",children:"Delete Account"})]})]}),Object(b.jsxs)("div",{className:"profileInfo",children:[Object(b.jsx)("a",{href:"#top",children:Object(b.jsx)("h4",{className:"profileInfoName",children:n.username})}),Object(b.jsx)("span",{className:"profileInfoBio",children:n.bio}),(null===n||void 0===n?void 0:n._id)===(null===f||void 0===f?void 0:f._id)&&Object(b.jsx)(G.a,{className:"profileOptions",onClick:function(){return l(!i)}})]}),Object(b.jsxs)("div",{className:"profileRightBottom",children:[Object(b.jsx)(re,{username:p,isHomepage:!1}),Object(b.jsx)(be,{user:n})]})]})]})]})},we=(r(113),function(){var e=Object(w.a)(N.a.mark((function e(t,r){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:"LOGIN_START"}),e.prev=1,e.next=4,S.a.post("/auth/login",{email:t.email.current.value.toLowerCase(),password:t.password.current.value});case 4:a=e.sent,r(h(a.data)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),r(x(e.t0)),alert("No user exists with these credentials. Use Register Page for registration.");case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),ke=r(133),Ce=function(){var e=Object(a.useRef)(),t=Object(a.useRef)(),r=Object(a.useContext)(O),n=r.isRetrieving,s=r.dispatch;return Object(b.jsx)("div",{className:"login",children:Object(b.jsxs)("div",{className:"loginWrapper",children:[Object(b.jsxs)("div",{className:"loginLeft",children:[Object(b.jsx)("h3",{className:"loginLogo",children:"InTouch"}),Object(b.jsx)("span",{className:"loginDescription",children:"The quickest and easiest way to stay in touch."})]}),Object(b.jsx)("div",{className:"loginRight",children:Object(b.jsxs)("form",{className:"loginBox",onSubmit:function(r){r.preventDefault(),we({email:e,password:t},s)},children:[Object(b.jsx)("input",{className:"loginInput",placeholder:"Email",type:"email",ref:e,required:!0}),Object(b.jsx)("input",{className:"loginInput",placeholder:"Password",type:"password",ref:t,required:!0,minLength:"5"}),Object(b.jsx)("button",{className:"loginButton",type:"submit",disabled:n,children:n?Object(b.jsx)(ke.a,{color:"white",size:"20px"}):"Login"}),Object(b.jsx)(l.b,{to:"/register",children:Object(b.jsx)("div",{className:"loginCreateAccount",disabled:n,children:"Register Page"})})]})})]})})},_e=(r(114),function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),r=t[0],n=t[1],s=Object(a.useContext)(O).dispatch,c=Object(a.useRef)(),o=Object(a.useRef)(),i=Object(a.useRef)(),p=Object(a.useRef)(),j=function(){var e=Object(w.a)(N.a.mark((function e(t){var r,a,l;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n(!0),r=function(){return window.location.reload()},i.current.value===p.current.value){e.next=8;break}p.current.setCustomValidity("Passwords do not match"),n(!1),e.next=22;break;case 8:return a={username:c.current.value,email:o.current.value.toLowerCase(),password:i.current.value},e.prev=9,e.next=12,S.a.post("auth/register",a);case 12:l=e.sent,s(h(l.data)),n(!1),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(9),alert("There is already a user with these credentials. Use Login Page for logging in."),n(!1),setTimeout(r,3e3);case 22:case"end":return e.stop()}}),e,null,[[9,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)("div",{className:"register",children:Object(b.jsxs)("div",{className:"registerWrapper",children:[Object(b.jsxs)("div",{className:"registerLeft",children:[Object(b.jsx)("h3",{className:"registerLogo",children:"InTouch"}),Object(b.jsx)("span",{className:"registerDescription",children:"The quickest and easiest way to stay in touch."})]}),Object(b.jsx)("div",{className:"registerRight",children:Object(b.jsxs)("form",{className:"registerBox",onSubmit:j,children:[Object(b.jsx)("input",{className:"registerInput",placeholder:"Email",ref:o,type:"email",required:!0}),Object(b.jsx)("input",{className:"registerInput",placeholder:"Username",ref:c,required:!0}),Object(b.jsx)("input",{className:"registerInput",placeholder:"Password",type:"password",ref:i,minLength:"5",required:!0}),Object(b.jsx)("input",{className:"registerInput",placeholder:"Confirm Password",type:"password",ref:p,minLength:"5",required:!0}),Object(b.jsx)("button",{className:"registerButton",type:"submit",disabled:r,children:r?Object(b.jsx)(ke.a,{color:"white",size:"20px"}):"Create Account"}),Object(b.jsx)(l.b,{to:"/login",children:Object(b.jsx)("div",{className:"registerButtonLogin",disabled:r,children:"Login Page"})})]})})]})})}),Pe=function(){var e=Object(a.useContext)(O).user;return Object(b.jsx)(l.a,{children:Object(b.jsxs)(ge.d,{children:[Object(b.jsx)(ge.b,{exact:!0,path:"/",children:e?Object(b.jsx)(ae,{}):Object(b.jsx)(_e,{})}),Object(b.jsx)(ge.b,{path:"/login",children:e?Object(b.jsx)(ge.a,{to:"/"}):Object(b.jsx)(Ce,{})}),Object(b.jsx)(ge.b,{path:"/register",children:e?Object(b.jsx)(ge.a,{to:"/"}):Object(b.jsx)(_e,{})}),Object(b.jsx)(ge.b,{path:"/profile/:username",children:Object(b.jsx)(Ne,{})})]})})};c.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(m,{children:Object(b.jsx)(Pe,{})})}),document.getElementById("root"))},75:function(e,t,r){},87:function(e,t,r){},88:function(e,t,r){}},[[115,1,2]]]);
//# sourceMappingURL=main.cc82db7b.chunk.js.map